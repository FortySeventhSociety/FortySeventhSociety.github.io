<!-- // D474designs | Modifications, and fixes by JOCV-III ///////
// All Rights Reserved /////// -->

<!doctype html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-G2VWYG5L58"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-G2VWYG5L58");
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <title>47th Marketplace</title>
    <meta
      name="description"
      content="The 47th Society | We Welcome You!
    Free games available online! Visit us today!"
    />
    <meta name="author" content="D474designs" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="keywords"
      content="games, video games, free games, online games, browser games, free game, game, miniclip, ugotgames, you got games, yougotgames, flash games, flash, d474, d474media, d474designs, data the destroyer, d474th3d357r0y3r, money, income, passive income, refferals, reffer, refferer, ads, links, work from home, steady income, start your own business, graphic design, seo, get paid, job, internet, advertisement, rich, dollars, work, daily, every day, get paid everyday, thathill, thathill.webs.com, https://thathill.webs.com, emoneyspace, emoneyspace.com/d474, emoneyspace.com, https://www.emoneyspace.com, grind, collect, collect money, collect money from home, influencer, how to make money as an influencer, how to create a passive income, part-time job, part time, part time job, how to start a business from home, how to start a business, d474, d474media, d474designs, data the destroyer, d474th3d357r0y3r, media company, online media, original content, representation, agent, online media company, advertisement, promotion, get noticed, ads, post ads, professional, professional advertisement service, professional advertisement firm, ad firm, advertisement firm, promotion firm, go viral, viral promotion, viral promotion firm, media firm, media agency, mass media, worldwide, global, world wide, world-wide advertisement, global advertisement, social media advertisement, social media promotion, social, influencer, how to make money as an influencer, how to gain a following, instagram, facebook, snapchat, tumblr, wordpress, blog, vlog, youtube, youtube channel, youtube channel promotion, youtube channel advertisement, grow my youtube, grow my youtube channel, grow my social media, grow my instagram, d474, d474media, d474designs, data the destroyer, d474th3d357r0y3r, datadesigns, datamedia, data, designer, design, designs, sound engineer, sound engineering, audio, audio production, graphic design, graphics, dj, dj data, dj d474, video, photo, photography, video work, videography, choreography, director, directing, acting, actor, writer, ghost writer, musician, artist, production, producer, beats, beat, rap, concert, rave, d474designs.webs.com, https://d474designs.webs.com, d474forex, that hill"
    />

    <meta property="og:title" content="The 47th Marketplace" />
    <meta property="og:image" content="../img/flower_dragon_full.png" />
    <meta property="og:image" content="../img/pickaxe_gold_full.png" />
    <meta property="og:image" content="../img/ruby_full.png" />
    <meta
      property="og:description"
      content="Remember to save you favorite tiles, and links, using the the ⭐ bookmarking tab! Don't forget our new Nōmlytics feature for detailed information on the market!"
    />
    <meta name="author" content="D474designs" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="The 47th Marketplace" />
    <meta
      name="twitter:description"
      content="Remember to save you favorite tiles, and links, using the the ⭐ bookmarking tab! Don't forget our new Nōmlytics feature for detailed information on the market!"
    />
    <meta name="twitter:image" content="../img/flower_dragon_full.png" />
    <meta name="twitter:image" content="../img/pickaxe_gold_full.png" />
    <meta name="twitter:image" content="../img/ruby_full.png" />
    <meta name="twitter:site" content="@d474designs" />
    <link rel="canonical" href="https://47thsociety.github.io/" />
    <meta
      property="og:image:secure_url"
      content="../img/flower_dragon_full.png"
    />
    <meta
      property="og:image:secure_url"
      content="../img/pickaxe_gold_full.png"
    />
    <meta property="og:image:secure_url" content="../img/ruby_full.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:alt" content="A NōmStead Marketplace" />

    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/v/dt/dt-2.1.3/datatables.min.css"
    />
    <link rel="stylesheet" href="css/default.css" />
    <link rel="stylesheet" href="../style.css" />

    <style>
      .chart-container {
        display: flex;
        justify-content: space-between; /* Distribuisce il grafico e le etichette con spazio tra loro */
        align-items: center;
        width: 70%; /* Mantiene la larghezza del contenitore al 100% */
        height: 500px; /* Imposta un'altezza fissa per il contenitore */
      }

      #resourceChart {
        width: 60%; /* Assegna il 60% della larghezza al grafico */
        height: 100%; /* Imposta l'altezza del grafico per adattarsi al contenitore */
      }

      #legendContainer {
        width: 35%; /* Assegna il 35% della larghezza alle etichette */
        padding-left: 20px; /* Aggiunge spazio tra il grafico e le etichette */
      }

      /* Include the Dodec font */
      @font-face {
        font-family: "Dodec";
        src: url("./fonts/dodec.ttf") format("truetype");
      }

      .dodec-font {
        font-family: "Dodec", sans-serif;
      }

      .custom-font {
        font-size: 24px; /* Dimensione del font */
        padding: 10px; /* Spaziatura interna */
        text-align: center; /* Centra il testo */
      }

      #refreshButton {
        background-color: transparent; /* Sfondo trasparente */
        border: none;
        padding: 2px 2px; /* Spaziatura interna */
        font-size: 18px; /* Dimensione del testo */
        cursor: pointer; /* Cambia il cursore quando si passa sopra il bottone */
      }

      #refreshButton:hover {
        background-color: rgba(
          0,
          0,
          0,
          0.1
        ); /* Effetto al passaggio del mouse (trasparente con sfumatura leggera) */
      }

      .star:nth-child(1) {
        animation-delay: -0.8s;
        background: rgb(30, 243, 225);
        box-shadow: 0 0 30px rgb(30, 243, 225);
      }
      .star:nth-child(2) {
        animation-delay: -1s;
        background: rgb(99, 247, 136);
        box-shadow: 0 0 30px rgb(99, 247, 136);
      }
      .star:nth-child(3) {
        animation-delay: -1.2s;
        background: yellow;
        box-shadow: 0 0 30px yellow;
      }
      .star:nth-child(4) {
        animation-delay: -0.4s;
        background: rgb(247, 61, 176);
        box-shadow: 0 0 30px rgb(247, 61, 176);
      }
      .star:nth-child(5) {
        animation-delay: -0.6s;
        background: rgb(241, 58, 58);
        box-shadow: 0 0 30px rgb(241, 58, 58);
      }
      .star {
        cursor: pointer;
      }
      .star:hover {
        background: white;
      }
      .star:active {
        background: black;
      }
      .neon-ads {
        display: grid;
      }
      .neon-ads h3 {
        color: white; /* Set the fill color of the text */
        -webkit-text-stroke: 0.5px black; /* Apply a 1px black stroke */
      }
      #weber {
        display: grid;
      }
      #mobi {
        display: none;
      }
      @media (max-width: 1080px) {
        #weber {
          display: none;
        }
        #mobi {
          display: grid;
        }
        .neon-ads {
        }
        .neon-ads h3 {
        }
        .star {
          color: black;
          color: white; /* Set the fill color of the text */
          -webkit-text-stroke: 0.5px black; /* Apply a 1px black stroke */
        }
      }
      .noSpaceHeader {
        line-height: 0;
      }
      /* Styling for the loading screen overlay */
      #loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: opacity 0.5s ease-out; /* Smooth transition for fading out */
        z-index: 9999; /* Ensure it's on top of everything */
      }
      .loadingContainer {
      }
      .loadingImage {
        position: absolute;
        z-index: 999999;
        width: 20vw;
        top: 30%;
        left: 40%;
      }
    </style>
  </head>

  <body>
    <!-- The loading screen overlay -->
    <div id="loading-screen">
      <div class="loadingContainer">
        <img
          class="loadingImage"
          id="randomImage"
          src="./img/transparency.png"
          alt="Wares"
        />
      </div>
    </div>
    <div class="switch3" id="switch3"></div>

    <!-- D474designs ----------------------------------------------------------------------------------------------------->

    <div class="menu2">
      <label for="css-selector"><span>Themes:</span></label>
      <select id="css-selector" onchange="changeCSS(this.value)">
        <option value="css/default.css">Default</option>
        <option value="css/cyber.css">Cyber</option>
        <option value="css/girls.css">Girls</option>
        <option value="css/neon.css">Neon</option>
        <!-- Aggiungi qui altre opzioni per i tuoi file CSS -->
      </select>
    </div>
    <div class="header-section">
      <h1>
        <a href="https://nomstead.com/?ref=btrpazme" target="_blank"
          >Data The Destroyer's</a
        >
      </h1>
      <h2>
        <a href="https://nomstead.com/?ref=btrpazme" target="_blank"
          >NōmStead Marketplace</a
        >
      </h2>
      <div class="tabs">
        <div class="tab" data-tab="tab1">👑</div>
        <div class="tab" data-tab="tab2">🏰</div>
        <div class="tab active" id="buyTab" data-tab="tab3">Buy Items</div>
        <div class="tab" id="sellTab" data-tab="tab4">Sell Items</div>
        <div class="tab" data-tab="tab5">⭐</div>
        <div class="tab" data-tab="tab6" id="nft">💎</div>
        <div class="tab" data-tab="tab7" id="nomstead">📜</div>
      </div>
    </div>
    <div class="neon-ads" id="weber">
      <button
        class="star"
        onclick="window.open('https://d474com.wordpress.com/contact/', '_blank');"
      >
        <h2 class="noSpaceHeader">Advertise Here; Contact Us!</h2>
      </button>
      <button class="star" onclick="window.open('./donate.html', '_blank');">
        <h2>Donate To The 𝟒𝟕th Marketplace!</h2>
      </button>
      <button
        class="star"
        onclick="window.open('https://discord.gg/fkQCH6sbnc', '_blank');"
      >
        <h2 class="noSpaceHeader">Become A Member Of Our Discord Server!</h2>
      </button>
      <button
        class="star"
        onclick="window.open('https://www.reddit.com/r/47thSociety/', '_blank');"
      >
        <h2 class="noSpaceHeader">
          Join The Discussion On Our Reddit Community!
        </h2>
      </button>
      <button
        class="star"
        onclick="window.open('https://cointr.ee/d474', '_blank');"
      >
        <h2 class="noSpaceHeader">Alternate Means Of Donations!</h2>
      </button>
    </div>
    <div class="neon-ads" id="mobi">
      <button
        class="star"
        onclick="window.open('https://d474com.wordpress.com/contact/', '_blank');"
      >
        <h5 class="noSpaceHeader">Advertise Here; Contact Us!</h5>
      </button>
      <button class="star" onclick="window.open('./donate.html', '_blank');">
        <h5>Donate To The 𝟒𝟕th Marketplace!</h5>
      </button>
      <button
        class="star"
        onclick="window.open('https://discord.gg/fkQCH6sbnc', '_blank');"
      >
        <h5 class="noSpaceHeader">Become A Member Of Our Discord Server!</h5>
      </button>
      <button
        class="star"
        onclick="window.open('https://www.reddit.com/r/47thSociety/', '_blank');"
      >
        <h5 class="noSpaceHeader">
          Join The Discussion On Our Reddit Community!
        </h5>
      </button>
      <button
        class="star"
        onclick="window.open('https://cointr.ee/d474', '_blank');"
      >
        <h5 class="noSpaceHeader">Alternate Means Of Donations!</h5>
      </button>
    </div>
    <div id="tab3" class="tab-content active">
      <div class="table-section buy">
        <div class="filter-group buy">
          <label for="categoryFilterBuy">Category:</label>
          <select id="categoryFilterBuy">
            <option value="">All</option>
          </select>
          <label for="subcategoryFilterBuy">Subcategory:</label>
          <select id="subcategoryFilterBuy">
            <option value="">All</option>
          </select>
          <p style="line-height: 0; line-spacing: 0; float: right">
            &nbsp; 𝙣𝙚𝙬! &nbsp;
          </p>
          <button
            onclick="window.open('./analytics.html', '_blank');"
            style="float: right"
          >
            📊
          </button>
          <button onclick="window.location.reload();" style="float: right">
            ⟳
          </button>
        </div>

        <table id="toBuyTable" class="display" style="width: 100%">
          <thead>
            <tr>
              <th></th>
              <th>Object</th>
              <th>Category</th>
              <th>Subcategory</th>
              <th>Price</th>
              <th>Quantity</th>
              <th></th>
              <th>Seller</th>
            </tr>
          </thead>
        </table>
      </div>
    </div>

    <div id="tab4" class="tab-content">
      <div class="table-section sell">
        <div class="filter-group sell">
          <label for="categoryFilterSell">Category:</label>
          <select id="categoryFilterSell">
            <option value="">All</option>
          </select>
          <label for="subcategoryFilterSell">Subcategory:</label>
          <select id="subcategoryFilterSell">
            <option value="">All</option>
          </select>
          <p style="line-height: 0; line-spacing: 0; float: right">
            &nbsp; 𝙣𝙚𝙬! &nbsp;
          </p>
          <button
            onclick="window.open('./analytics.html', '_blank');"
            style="float: right"
          >
            📊
          </button>
          <button onclick="window.location.reload();" style="float: right">
            ⟳
          </button>
        </div>

        <table id="toSellTable" class="display" style="width: 100%">
          <thead>
            <tr>
              <th></th>
              <th>Object</th>
              <th>Category</th>
              <th>Subcategory</th>
              <th>Price</th>
              <th>Quantity</th>
              <th></th>
              <th>Seller</th>
            </tr>
          </thead>
        </table>
      </div>
    </div>

    <div id="tab1" class="tab-content">
      <div class="table-section sell">
        <!-- Usa la classe 'sell' per copiare lo stile -->
        <div class="dodec-font">
          <!--
        <div class="dodec-font"><div class="custom-font">The Politics Of The Forty Seventh Society Kingdoms</div></div>
    -->
          <br />
          <center>
            <h3>👋 Introduction</h3>

            <h4>
              NōmStead is a multiplayer casual, cozy web three game with a
              player-controlled economy where you can create your own kingdom,
              collect resources, make friends, craft objects, farm and trade.
              <br />
              You can play NōmStead on desktop and mobile directly at
              <a
                style="text-decoration: none; color: darkolivegreen"
                href="https://nomstead.com/?ref=btrpazme"
                target="_blank"
                >NōmStead</a
              >
            </h4>
            <h3>🎓 Get started</h3>
            <h4>
              This section will guide you through the initial steps to play
              NōmStead on either mobile or desktop.
            </h4>
            <h3>🎨 Create your account</h3>
            <h4>Creating an account on NōmStead is simple and free.</h4>
            <p>
              <a
                style="
                  text-decoration: none;
                  color: darkolivegreen;
                  font-weight: 600;
                "
                href="https://nomstead.com/?ref=btrpazme"
                target="_blank"
              >
                + Go to NōmStead on desktop or mobile and click on 'Play Now'
                <br />
                + Choose your username, and avatar, out of the ones available
                <br />
                + Sign in with an email and password, or your Google
                account...</a
              >
            </p>
            <h4>That is it!</h4>
            <h4>
              <a
                style="text-decoration: none; color: rebeccapurple"
                href="https://nomstead.com/?ref=btrpazme"
                target="_blank"
              >
                Your avatar arrive on the central tile of NōmStead, and you can
                now explore the world.</a
              >
            </h4>
            <h3>👾 Discord</h3>
            <h4>
              We highly recommend joining us on
              <a
                style="text-decoration: none; color: darkolivegreen"
                href="https://discord.gg/fkQCH6sbnc"
                target="_blank"
                >Discord</a
              >
              to chat with the developers and discover new features and content.
            </h4>
            <h3>⚠️ Alpha phase warning</h3>
            <h4>
              Alpha means that the game is still a work in progress. By playing
              the alpha version you are contributing greatly to the future
              game’s development—but you must expect setbacks and bugs.
              <br />
              In exchange for your understanding and patience, the devs will
              often reward early adopters with special items, advantages, unique
              sales, exclusive access, and more.
            </h4>
            <h5>
              <a
                style="text-decoration: none; color: darkolivegreen"
                href="https://d474forex.github.io"
                target="_blank"
              >
                *The information provided on this website does not constitute
                investment advice, financial advice, trading advice, or any
                other sort of advice and you should not treat any of the
                website’s content as such.</a
              >
            </h5>
          </center>
          <br />
          <br />
        </div>
      </div>
    </div>

    <div id="tab2" class="tab-content">
      <div class="table-section buy">
        <div class="dodec-font">
          <div class="custom-font">Some Of The Items From NōmStead</div>
          <div
            style="
              display: flex;
              justify-content: space-between;
              flex-wrap: wrap;
              width: 100%;
            "
          >
            <table
              id="resourceTable"
              class="display"
              style="width: 18%; margin: 5px"
            >
              <thead>
                <tr>
                  <th style="width: 50px"></th>
                  <th style="width: 100px">Materials</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/_nuxt/img/gold.b8469d8.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Gold</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/wood_plank.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Wood Plank</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/stone_brick.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Stone Brick</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/clay_brick.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Clay Brick</td>
                </tr>
              </tbody>
            </table>

            <table
              id="resourceTable"
              class="display"
              style="width: 18%; margin: 5px"
            >
              <thead>
                <tr>
                  <th style="width: 50px"></th>
                  <th style="width: 100px">Gems</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/amethyst.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Amethyst</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/emerald.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Emerald</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/ruby.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Ruby</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/sapphire.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Sapphire</td>
                </tr>
              </tbody>
            </table>

            <table
              id="resourceTable"
              class="display"
              style="width: 18%; margin: 5px"
            >
              <thead>
                <tr>
                  <th style="width: 50px"></th>
                  <th style="width: 100px">Raw Goods</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/ingot_gold.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Ingot Gold</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/ingot_silver.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Ingot Silver</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/ingot_iron.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Ingot Iron</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/cotton_thread.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Cotton Thread</td>
                </tr>
              </tbody>
            </table>

            <table
              id="resourceTable"
              class="display"
              style="width: 18%; margin: 5px"
            >
              <thead>
                <tr>
                  <th style="width: 50px"></th>
                  <th style="width: 100px">Thread</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/cotton_thread_brown.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Brown Cotton Thread</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/cotton_thread_green.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Green Cotton Thread</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/cotton_thread_orange.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Orange Cotton Thread</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/cotton_thread_red.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Red Cotton Thread</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/cotton_thread_yellow.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Yellow Cotton Thread</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/cotton_thread_blue.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Blue Cotton Thread</td>
                </tr>
              </tbody>
            </table>
            <table
              id="resourceTable"
              class="display"
              style="width: 18%; margin: 5px"
            >
              <thead>
                <tr>
                  <th style="width: 50px"></th>
                  <th style="width: 100px">Foodstuffs</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/wrapped_potato.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Wrapped Potato</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/salad.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Salad</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/mushroom_soup.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Mushroom Soup</td>
                </tr>
                <tr>
                  <td>
                    <img
                      src="https://nomstead.com/images/objects/fries.png"
                      style="width: 30px; height: 30px"
                    />
                  </td>
                  <td>Fries</td>
                </tr>
              </tbody>
            </table>
          </div>

          <br />
          <br />
        </div>
        <div
          class="dodec-font"
          style="display: flex; justify-content: space-between"
        >
          <div style="width: 48%">
            <table class="display" style="width: 100%">
              <tr>
                <th style="width: 50px"></th>
                <th>Building</th>
              </tr>
              <tr>
                <td>
                  <img
                    src="https://nomstead.com/images/objects/bread_oven.png"
                    style="width: 50px; height: 50px"
                  />
                </td>
                <td>Bread Oven</td>
              </tr>
              <tr>
                <td>
                  <img
                    src="https://nomstead.com/images/objects/dyeing_vat.png"
                    style="width: 50px; height: 50px"
                  />
                </td>
                <td>Dyeing Vat</td>
              </tr>
              <tr>
                <td>
                  <img
                    src="https://nomstead.com/images/objects/furnace.png"
                    style="width: 50px; height: 50px"
                  />
                </td>
                <td>Furnace</td>
              </tr>
              <tr>
                <td>
                  <img
                    src="https://nomstead.com/images/objects/mill.png"
                    style="width: 50px; height: 50px"
                  />
                </td>
                <td>Mill</td>
              </tr>
              <tr>
                <td>
                  <img
                    src="https://nomstead.com/images/objects/sawmill.png"
                    style="width: 50px; height: 50px"
                  />
                </td>
                <td>Sawmill</td>
              </tr>
              <tr>
                <td>
                  <img
                    src="https://nomstead.com/images/objects/spinning_wheel.png"
                    style="width: 50px; height: 50px"
                  />
                </td>
                <td>Spinning Wheel</td>
              </tr>
              <tr>
                <td>
                  <img
                    src="https://nomstead.com/images/objects/stonecutter.png"
                    style="width: 50px; height: 50px"
                  />
                </td>
                <td>Stone Cutter</td>
              </tr>
            </table>
          </div>

          <div style="width: 48%">
            <table class="display" style="width: 100%">
              <tr>
                <th>Resource</th>
                <th></th>
              </tr>
              <tr>
                <td>Wood</td>
                <td>
                  <img
                    src="https://nomstead.com/images/objects/wood.png"
                    style="width: 30px; height: 30px"
                  />
                </td>
              </tr>
              <tr>
                <td>Stone</td>
                <td>
                  <img
                    src="https://nomstead.com/images/objects/stone.png"
                    style="width: 30px; height: 30px"
                  />
                </td>
              </tr>
              <tr>
                <td>Iron</td>
                <td>
                  <img
                    src="https://nomstead.com/images/objects/iron.png"
                    style="width: 30px; height: 30px"
                  />
                </td>
              </tr>
              <tr>
                <td>Silver</td>
                <td>
                  <img
                    src="https://nomstead.com/images/objects/silver.png"
                    style="width: 30px; height: 30px"
                  />
                </td>
              </tr>
              <tr>
                <td>Gold Ore</td>
                <td>
                  <img
                    src="https://nomstead.com/images/objects/gold.png"
                    style="width: 30px; height: 30px"
                  />
                </td>
              </tr>
              <tr>
                <td>Clay</td>
                <td>
                  <img
                    src="https://nomstead.com/images/objects/clay.png"
                    style="width: 30px; height: 30px"
                  />
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div id="tab5" class="tab-content">
      <div class="table-section sell">
        <!-- Usa la classe 'sell' per copiare lo stile -->
        <div class="dodec-font">
          <button onclick="scrollex();" style="float: right">✨</button>
          <p style="line-height: 0; line-spacing: 0; float: right">
            &nbsp; 𝙣𝙚𝙬! &nbsp;
          </p>
          <button
            onclick="window.open('./analytics.html', '_blank');"
            style="float: right"
          >
            📊
          </button>
          <button onclick="window.location.reload();" style="float: right">
            ⟳
          </button>
          <iframe
            title="47th Directory"
            width="100%"
            height="1500vh"
            src="./kingdoms.html"
            id="sYL"
            style="scroll-margin-top: 3.5vh"
          >
          </iframe>
          <hr class="table-section" />
          <button onclick="scrollei();" style="float: right">➕</button>
          <p style="line-height: 0; line-spacing: 0; float: right">
            &nbsp; 𝙣𝙚𝙬! &nbsp;
          </p>
          <button
            onclick="window.open('./analytics.html', '_blank');"
            style="float: right"
          >
            📊
          </button>
          <button onclick="window.location.reload();" style="float: right">
            ⟳
          </button>
          <iframe
            title="Icons Browser"
            width="100%"
            height="1000vh"
            src="./fontawesomebrowser.html"
            id="fAI"
            style="scroll-margin-top: 3.5vh"
          >
          </iframe>
        </div>
      </div>
    </div>

    <div id="tab6" class="tab-content">
      <div class="table-section sell">
        <!-- Usa la classe 'sell' per copiare lo stile -->
        <div class="dodec-font">
          <br />
          <br />
          <a href="https://nomstead.com/?ref=btrpazme" target="_blank"
            ><h1>💎</h1></a
          >
          <a href="https://chests.nomstead.com/" target="_blank"
            ><h1>Founder's Chests NFT Sale!</h1></a
          >
          <br />
          <br />
          <br />
          <!-- iframe
            id="chests"
            width="100%"
            height="1500vh"
            src="https://chests.nomstead.com/"
            src="about:blank"
          ></iframe -->
        </div>
      </div>
    </div>

    <div id="tab7" class="tab-content">
      <div class="table-section sell">
        <!-- Usa la classe 'sell' per copiare lo stile -->
        <div class="dodec-font">
          <br />
          <br />
          <a href="https://nomstead.com/?ref=btrpazme" target="_blank"
            ><h1>📜</h1></a
          >
          <a href="https://docs.kingdom.so/" target="_blank"
            ><h1>Learn To Play NōmStead!</h1></a
          >
          <br />
          <br />
          <br />
          <!-- iframe
            id="docs"
            width="100%"
            height="1500vh"
            src="https://docs.kingdom.so/"
            src="about:blank"
          ></iframe -->
        </div>
      </div>
    </div>

    <footer>
      <p>
        <span id="year"></span>❤️
        <a href="https://nomstead.com/?ref=btrpazme" target="_blank"
          >Data The Destroyer</a
        >
      </p>
    </footer>

    <script src="../script2.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/2.1.8/js/dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
      const images = [
        "./img/0.png",
        "./img/1.png",
        "./img/2.png",
        "./img/3.png",
        "./img/4.png",
        "./img/5.png",
        "./img/6.png",
        "./img/7.png",
        "./img/8.png",
        "./img/9.png",
        "./img/10.png",
      ];

      const imageElement = document.getElementById("randomImage");

      // Function to change the image by pre-loading it first
      const changeImage = () => {
        // Get a random index from the images array
        const randomIndex = Math.floor(Math.random() * images.length);
        const newImageUrl = images[randomIndex];

        // Create a temporary Image object to pre-load the image
        const tempImage = new Image();

        // Set the onload event handler. This function will run once the image is fully loaded.
        tempImage.onload = () => {
          // Update the main image's src only after the temp image is ready
          imageElement.src = newImageUrl;
        };

        // Start loading the new image by setting its src
        tempImage.src = newImageUrl;
      };

      // Call the function once to display an initial image immediately
      changeImage();

      // Set an interval to change the image every 250 milliseconds (0.25 seconds)
      setInterval(changeImage, 250);

      // Get a reference to the loading screen and main content elements
      const loadingScreen = document.getElementById("loading-screen");

      // Wait for the entire page to load before starting the timer
      // Use setTimeout to hide the loading screen after 3 seconds (3000 milliseconds)
      setTimeout(() => {
        // Fade out the loading screen by setting its opacity to 0
        loadingScreen.style.opacity = "0";

        // After the fade-out transition is complete (0.5s in our CSS), hide the loading screen completely
        // and show the main content. We use another setTimeout for this.
        setTimeout(() => {
          loadingScreen.style.display = "none";

          // Now, show the main content by adding the 'visible' class
          mainContent.style.display = "block";
          setTimeout(() => {
            mainContent.classList.add("visible");
          }, 10); // Small delay to ensure the display change is registered before the opacity transition
        }, 0); // This delay should match the CSS transition duration
      }, 1000); // 3-second delay for the loading screen

      function scrollex() {
        document.getElementById("fAI").scrollIntoView({ behavior: "smooth" });
        console.log("Tracing... [B]");
      }

      function scrollei() {
        document.getElementById("sYL").scrollIntoView({ behavior: "smooth" });
        console.log("Tracing... [47]");
      }

      /*
      $("#nft").click(function () {
        var iframe = $("#chests");
        iframe.attr("src", iframe.data("src"));
      });

      $("#nomstead").click(function () {
        var iframe = $("#docs");
        iframe.attr("src", iframe.data("src"));
      });
      */

      $("#nft").click(function () {
        window.open("https://chests.nomstead.com/", (target = "_blank"));
      });

      $("#nomstead").click(function () {
        var iframe = $("#docs");
        window.open("https://docs.kingdom.so/", (target = "_blank"));
      });
    </script>

    <script>
      $(document).ready(function () {
        // Define API URL as a constant at the top
        const apiUrl = "https://api.nomstead.com/open/marketplace";

        // --- Tab Handling Logic ---
        // Use a more specific class for tab content to avoid conflicts
        $(".tab").on("click", function () {
          const tabId = $(this).data("tab");

          // Deactivate all tabs and activate the clicked one
          $(".tab").removeClass("active");
          $(this).addClass("active");

          // Hide all tab content and show the corresponding content
          $(".tab-content").removeClass("active");
          $("#" + tabId).addClass("active");
        });

        // --- DataTables and Data Processing Logic ---

        /**
         * Creates a data row for DataTables from a fetched item.
         * @param {object} item - The data object for a single marketplace item.
         * @param {string} type - The type of transaction ('buy' or 'sell').
         * @returns {Array<string>} An array representing a single table row.
         */
        function createRow(item, type) {
          return [
            `<img src="${item.object.thumbnailImageUrl}" alt="${item.object.metadata.title}" style="width:16px; height:16px; border-radius: 4px;">`,
            item.object.metadata.title,
            item.object.category,
            item.object.subCategory,
            item.pricing.unitPrice || item.pricing.desiredQuantity,
            item.pricing.availableQuantity || item.pricing.desiredQuantity,
            `<a href="${item.tile.url}" target="_blank" class="button ${type === "buy" ? "" : "sell-button"}">${type === "buy" ? "Buy" : "Sell"}</a>`,
            item.tile.owner,
          ];
        }

        /**
         * Initializes or re-initializes a DataTable with new data.
         * @param {string} tableId - The ID selector of the table element.
         * @param {Array<object>} data - The data to populate the table with.
         * @param {string} type - The type of transaction ('buy' or 'sell').
         */
        function initDataTable(tableId, data, type) {
          // If DataTable is already initialized, destroy it first
          if ($.fn.DataTable.isDataTable(tableId)) {
            $(tableId).DataTable().clear().destroy();
          }

          // Define a dynamic order based on the table type
          const orderConfig = [
            [2, "asc"],
            [3, "asc"],
            [4, type === "sell" ? "desc" : "asc"],
          ];

          $(tableId).DataTable({
            data: data.map((item) => createRow(item, type)),
            columns: [
              { title: "🌿", orderable: false, className: "dt-center" },
              { title: "Object" },
              { title: "Category" },
              { title: "Subcategory" },
              { title: "Price" },
              { title: "Quantity" },
              { title: "💲", orderable: false, className: "dt-center" },
              { title: "Owner" },
            ],
            pageLength: 25,
            order: orderConfig, // Use the dynamically generated order
            createdRow: function (row) {
              $(row).addClass(type === "buy" ? "buy-row" : "sell-row");
            },
            language: {
              paginate: {
                previous: "<",
                next: ">",
              },
              lengthMenu: "Show _MENU_ entries",
              info: "Showing _START_ to _END_ of _TOTAL_ entries",
              infoFiltered: "(filtered from _MAX_ total entries)",
              search: "Search:",
            },
          });
        }

        /**
         * Populates filter dropdowns with unique categories and subcategories.
         * @param {Array<object>} data - The full dataset.
         * @param {jQuery} categoryFilter - The jQuery object for the category select.
         * @param {jQuery} subcategoryFilter - The jQuery object for the subcategory select.
         */
        function populateFilters(data, categoryFilter, subcategoryFilter) {
          const categories = [
            ...new Set(data.map((item) => item.object.category)),
          ];
          const subCategories = [
            ...new Set(data.map((item) => item.object.subCategory)),
          ];

          categoryFilter.empty().append(new Option("All", ""));
          categories.forEach((category) => {
            categoryFilter.append(new Option(category, category));
          });

          subcategoryFilter.empty().append(new Option("All", ""));
          subCategories.forEach((subCategory) => {
            subcategoryFilter.append(new Option(subCategory, subCategory));
          });
        }

        /**
         * Sets up a single event handler for both category and subcategory filters.
         * @param {string} tableId - The ID selector of the table element.
         * @param {string} categoryFilterId - The ID selector of the category select.
         * @param {string} subcategoryFilterId - The ID selector of the subcategory select.
         */
        function setupFilters(tableId, categoryFilterId, subcategoryFilterId) {
          const categoryFilter = $(categoryFilterId);
          const subcategoryFilter = $(subcategoryFilterId);
          const table = $(tableId).DataTable();

          const applyFilter = () => {
            const category = categoryFilter.val();
            const subcategory = subcategoryFilter.val();

            // Clear existing column searches
            table.columns().search("");

            // Apply filters if values are selected
            if (category) {
              table.columns(2).search(category);
            }
            if (subcategory) {
              table.columns(3).search(subcategory);
            }

            table.draw();
          };

          categoryFilter.on("change", applyFilter);
          subcategoryFilter.on("change", applyFilter);
        }

        // --- Main Data Fetching and Initialization ---
        fetch(apiUrl)
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json();
          })
          .then((data) => {
            // Sort data to ensure consistent order
            const sortedToBuy = data.toBuy.sort((a, b) =>
              a.object.category.localeCompare(b.object.category),
            );
            const sortedToSell = data.toSell.sort((a, b) =>
              a.object.category.localeCompare(b.object.category),
            );

            // Initialize tables with fetched and sorted data
            initDataTable("#toBuyTable", sortedToBuy, "buy");
            initDataTable("#toSellTable", sortedToSell, "sell");

            // Populate filter dropdowns
            populateFilters(
              sortedToBuy,
              $("#categoryFilterBuy"),
              $("#subcategoryFilterBuy"),
            );
            populateFilters(
              sortedToSell,
              $("#categoryFilterSell"),
              $("#subcategoryFilterSell"),
            );

            // Set up the filtering logic
            setupFilters(
              "#toBuyTable",
              "#categoryFilterBuy",
              "#subcategoryFilterBuy",
            );
            setupFilters(
              "#toSellTable",
              "#categoryFilterSell",
              "#subcategoryFilterSell",
            );
          })
          .catch((error) => {
            console.error("Error fetching data:", error);
            // You could display a user-friendly error message here
            // e.g., $("#error-message").text("Failed to load data. Please try again later.");
          });

        // Mappa dei colori distintivi per le risorse
        const resourceColors = {
          wood: "#8B4513", // Marrone legno
          stone: "#A9A9A9", // Grigio scuro
          iron: "#6B6B6B", // Grigio scuro per il ferro
          silver: "#C0C0C0", // Argento
          gold: "#FFD700", // Oro
          amethyst: "#9966CC", // Viola ametista
          clay: "#D2691E", // Terracotta
          clay_brick: "#FF6347", // Rosso arancio (diverso da argilla)
          ruby: "#C72C41", // Rosso rubino
          sapphire: "#0033A0", // Blu zaffiro scuro
          emerald: "#50C878", // Verde smeraldo
          stone_brick: "#7B8D82", // Mattone verde
          cotton_thread: "#F0E5DE", // Beige chiaro
          wood_plank: "#D4A30A", // Legno dorato
          ingot_gold: "#B8860B", // Oro (mantieni questo come oro)
          ingot_silver: "#B0C4DE", // Grigio acciaio (leggermente più chiaro di argento)
          ingot_iron: "#4B4B4B", // Grigio scuro per il ferro
          cotton_thread_brown: "#A0522D", // Marrone chiaro (diverso da legno)
          cotton_thread_green: "#228B22", // Verde
          cotton_thread_orange: "#FFA500", // Arancione
          cotton_thread_red: "#FF4500", // Rosso
          cotton_thread_yellow: "#FFF700", // Giallo (mantieni lo stesso per continuità)
          cotton_thread_blue: "#0000FF", // Giallo (mantieni lo stesso per continuità)
          wrapped_potato: "#DEB887", // Beige marrone (diverso da altri marroni)
          salad: "#66CDAA", // Verde acqua (diverso dall’insalata)
          mushroom_soup: "#FFE4B5", // Pesca chiaro (diverso da zuppa di funghi)
          fries: "#F4A460", // Sabbia (più distintivo per le patatine)
        };
      });

      var refresh = window.localStorage.getItem("refresh");
      console.log(refresh);
      setTimeout(function () {
        if (refresh === null) {
          window.localStorage.setItem("refresh", "1");
          window.location.reload();
        }
      }, 500); // 1500 milliseconds = 1.5 seconds

      setTimeout(function () {
        localStorage.removeItem("refresh");
      }, 3000); // 1700 milliseconds = 1.7 seconds

      function setFocus() {
        setTimeout(function () {
          $(".dt-input").focus();
          console.log("Focus");
        }, 500);
      }

      $("#sellTab").on("click", function () {
        setFocus();
      });
      $("#buyTab").on("click", function () {
        setFocus();
      });
    </script>

    <script src="theme.js"></script>
  </body>
</html>
