<!-- // D474designs | JOCV-III ///////
// All Rights Reserved /////// -->

<!doctype html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-G2VWYG5L58"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-G2VWYG5L58");
    </script>
    <meta charset="UTF-8" />
    <link rel="icon" href="./favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon" />
    <title>The 47th Society</title>
    <meta
      name="description"
      content="The 47th Society | We Welcome You!
  Free games available online! Visit us today!"
    />
    <meta name="author" content="D474designs" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="keywords"
      content="games, video games, free games, online games, browser games, free game, game, miniclip, ugotgames, you got games, yougotgames, flash games, flash, d474, d474media, d474designs, data the destroyer, d474th3d357r0y3r, money, income, passive income, refferals, reffer, refferer, ads, links, work from home, steady income, start your own business, graphic design, seo, get paid, job, internet, advertisement, rich, dollars, work, daily, every day, get paid everyday, thathill, thathill.webs.com, https://thathill.webs.com, emoneyspace, emoneyspace.com/d474, emoneyspace.com, https://www.emoneyspace.com, grind, collect, collect money, collect money from home, influencer, how to make money as an influencer, how to create a passive income, part-time job, part time, part time job, how to start a business from home, how to start a business, d474, d474media, d474designs, data the destroyer, d474th3d357r0y3r, media company, online media, original content, representation, agent, online media company, advertisement, promotion, get noticed, ads, post ads, professional, professional advertisement service, professional advertisement firm, ad firm, advertisement firm, promotion firm, go viral, viral promotion, viral promotion firm, media firm, media agency, mass media, worldwide, global, world wide, world-wide advertisement, global advertisement, social media advertisement, social media promotion, social, influencer, how to make money as an influencer, how to gain a following, instagram, facebook, snapchat, tumblr, wordpress, blog, vlog, youtube, youtube channel, youtube channel promotion, youtube channel advertisement, grow my youtube, grow my youtube channel, grow my social media, grow my instagram, d474, d474media, d474designs, data the destroyer, d474th3d357r0y3r, datadesigns, datamedia, data, designer, design, designs, sound engineer, sound engineering, audio, audio production, graphic design, graphics, dj, dj data, dj d474, video, photo, photography, video work, videography, choreography, director, directing, acting, actor, writer, ghost writer, musician, artist, production, producer, beats, beat, rap, concert, rave, d474designs.webs.com, https://d474designs.webs.com, d474forex, that hill, d474, d474media, d474designs, data the destroyer, d474th3d357r0y3r, datadesigns, datamedia, data, designer, design, designs, sound engineer, sound engineering, audio, audio production, graphic design, graphics, dj, dj data, dj d474, video, photo, photography, video work, videography, choreography, director, directing, acting, actor, writer, ghost writer, musician, artist, production, producer, beats, beat, rap, concert, rave, d474designs.webs.com, https://d474designs.webs.com, d474forex, that hill"
    />

    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="./nav/style2.css" />
    <link rel="stylesheet" href="./nav/clouds/style.css" />
    <link rel="stylesheet" href="./style3.css" />

    <style>
      /* Custom CSS for the game-link-button animation and font */
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap");

      body {
        font-family: "Inter", sans-serif;
        overflow: hidden; /* Prevent scrollbars due to full-screen background */
      }

      /* Basic button styles for choices */
      .choice-button {
        @apply px-6 py-3 bg-blue-700 text-white font-semibold rounded-lg shadow-md
                   hover:bg-blue-800 transition-colors duration-200 ease-in-out
                   transform hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-blue-500;
      }

      /* Specific styles for the central game link button */
      #game-link-button {
        /* Already styled with Tailwind classes in HTML for animation */
      }

      /* Keyframe animation for a subtle pulse effect (optional, but nice) */
      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.02);
        }
        100% {
          transform: scale(1);
        }
      }

      /* Apply pulse animation to the game-link-button */
      #game-link-button:hover {
        animation: pulse 1.5s infinite;
      }

      /* Styles for the textarea in the edit links modal */
      #game-links-textarea {
        @apply w-full p-3 bg-gray-700 border border-gray-600 rounded-md text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500;
        min-height: 200px;
        font-family: monospace; /* Monospaced font for JSON input */
      }

      /* Background container for CSS gradients */
      #background-layers-container {
        transition:
          background-image 1s ease-in-out,
          opacity 0.5s ease-in-out; /* Smooth transition for background */
        background-size: cover;
        background-position: center center;
      }

      .slideshow-container {
        bottom: 0vh;
        right: 0vw;
        z-index: 9;
      }
      @media only screen and (max-width: 512px) {
        .slideshow-container {
        bottom: -250px;
        right: -250px;
        z-index: 9;
        }
      }
      @media only screen and (max-width: 375px) {
        .slideshow-container {
        bottom: -250px;
        right: -250px;
        z-index: 9;
        }
      }

      .sitemap {
        position: absolute;
        z-index: 49;
        left: 0vw;
        bottom: -50vh;
        text-shadow: 0px 0px 50px white;
        -webkit-text-stroke: 1px black;
        animation: glowBright 2s ease-in-out infinite alternate; /* Apply animation */
      }
      @media only screen and (max-width: 900px) {
        .sitemap {
          position: absolute;
          z-index: 49;
          left: 0vw;
          bottom: -60vh;
          text-shadow: 0px 0px 50px white;
          -webkit-text-stroke: 1px black;
          animation: glowBright 2s ease-in-out infinite alternate; /* Apply animation */
        }
      }
      @media only screen and (max-width: 512px) {
        .sitemap {
          position: absolute;
          z-index: 49;
          left: 0vw;
          bottom: -70vh;
          text-shadow: 0px 0px 50px white;
          -webkit-text-stroke: 1px black;
          animation: glowBright 2s ease-in-out infinite alternate; /* Apply animation */
        }
      }
      @media only screen and (max-width: 375px) {
        .sitemap {
          position: absolute;
          z-index: 49;
          left: 0vw;
          bottom: -80vh;
          text-shadow: 0px 0px 50px white;
          -webkit-text-stroke: 1px black;
          animation: glowBright 2s ease-in-out infinite alternate; /* Apply animation */
        }
      }

      .scramble {
        font-size: 2rem;
        line-height: 1.3;
        cursor: pointer;
        transition: color 0.3s ease;
        text-shadow: 0px 0px 50px white;
        -webkit-text-stroke: 1px black;
        animation: glowBright 2s ease-in-out infinite alternate; /* Apply animation */
      }

      .scramble:hover {
        color: #0ff;
        text-shadow: 0px 0px 50px white;
        -webkit-text-stroke: 1px black;
        animation: glowBright 2s ease-in-out infinite alternate; /* Apply animation */
      }

      @keyframes glowBright {
        0% {
          text-shadow:
            0 0 30px #ff0000,
            0 0 65px #00ff00,
            0 0 100px #0000ff;
        }
        50% {
          text-shadow:
            0 0 30px #00ff00,
            0 0 65px #0000ff,
            0 0 100px #ff0000;
        }
        100% {
          text-shadow:
            0 0 30px #0000ff,
            0 0 65px #ff0000,
            0 0 100px #00ff00;
        }
      }
    </style>
  </head>

  <body class="bg-gray-900">
    <!-- The 47th Soc.
🙂💯🫠⭐🔥👍🤌🐝🌐💌👌✌️🤟✊🍀🌳🐜🎃🎯🤿🔫👾🃏🎟️💰🩻⏳🔔📯🗡️🛡️⚪🗯️😶‍🌫️🤣
https://www.reddit.com/r/47thSociety/ -->

    <!-- partial:index.partial.html -->
    <nav class="top-right open">
      <a href="https://d474com.wordpress.com/" target="_blank" class="disc l1">
        <div>blog</div>
      </a>
      <a
        href="https://www.reddit.com/r/47thSociety"
        target="_blank"
        class="disc l2"
      >
        <div>about us</div>
      </a>
      <a
        href="https://that-hill.github.io/games"
        target="_blank"
        class="disc l3"
      >
        <div>more games</div>
      </a>
      <a href="https://discord.gg/gnDVaZF53h" target="_blank" class="disc l4">
        <div>sign up!</div>
      </a>
      <a class="disc l5 toggle"> </a>
      <!-- partial:index.partial.html -->
    </nav>

    <!-- partial:index.partial.html -->
    <div id="Clouds" style="z-index: 9">
      <div
        class="Cloud Foreground"
        onclick="window.open('https://globalsolutionsunited.github.io/uplink');"
      ></div>
      <div
        class="Cloud Background"
        onclick="window.open('https://d474designs.github.io/payload');"
      ></div>
      <div
        class="Cloud Foreground"
        onclick="window.open('https://that-hill.github.io/secretlevel');"
      ></div>
      <div
        class="Cloud Background"
        onclick="window.open('https://d474media.github.io/eldorado');"
      ></div>
      <div
        class="Cloud Foreground"
        onclick="window.open('https://d474developments.github.io/feed');"
      ></div>
      <div
        class="Cloud Background"
        onclick="window.open('https://globalsolutionsunited.github.io/uplink');"
      ></div>
      <div
        class="Cloud Background"
        onclick="window.open('https://d474designs.github.io/payload');"
      ></div>
      <div
        class="Cloud Foreground"
        onclick="window.open('https://that-hill.github.io/secretlevel');"
      ></div>
      <div
        class="Cloud Background"
        onclick="window.open('https://d474media.github.io/eldorado');"
      ></div>
      <div
        class="Cloud Background"
        onclick="window.open('https://d474developments.github.io/feed');"
      ></div>
      <!-- <svg viewBox="0 0 40 24" class="Cloud"><use xlink:href="#Cloud"></use></svg> -->
    </div>

    <!-- partial -->
    <a
      href="javascript:setTimeout(()=>{window. location = './marketplace/index.html'},1000);"
    >
      <img
        src="./img/kingdomFinal.png"
        style="
          position: absolute;
          z-index: 99997;
          top: 5px;
          left: 5px;
          height: 12%;
        "
      />
    </a>
    <a
      href="javascript:setTimeout(()=>{window. location = 'https://rollercoin.com/?r=klv4bpd8'},1000);"
    >
      <img
        src="./img/ham.gif"
        style="
          position: absolute;
          z-index: 99998;
          top: 3%;
          left: 4%;
          height: 8%;
        "
      />
    </a>

    <nav class="sitemap">
      <a href="./index.html" style="text-decoration: none"
        ><div class="scramble" data-text="HOMEPAGE">HOMEPAGE</div></a
      >
    </nav>

    <!-- Main game container -->
    <div
      id="game-container"
      class="relative min-h-screen flex flex-col items-center justify-center text-white font-inter p-4"
    >
      <!-- Container for background image layers (now uses CSS backgrounds) -->
      <div
        id="background-layers-container"
        class="absolute inset-0 w-full h-full overflow-hidden"
      >
        <!-- Background will be set via JavaScript using CSS properties -->
      </div>

      <!-- Overlay for text and buttons to ensure readability -->
      <div
        class="relative z-10 bg-black bg-opacity-70 rounded-xl p-8 max-w-3xl text-center shadow-lg border border-gray-700"
      >
        <!-- Scene description text -->
        <div
          id="scene-description"
          class="text-md mb-6 leading-relaxed text-gray-200"
        ></div>

        <!-- Container for choice buttons -->
        <div
          id="choices-container"
          class="flex flex-wrap justify-center gap-4 mb-8"
        >
          <!-- Choice buttons will be inserted here by JavaScript -->
        </div>

        <!-- Container for game link buttons -->
        <div
          class="flex flex-col sm:flex-row justify-center items-center gap-4"
        >
          <!-- Animated button for external game link -->
          <button
            id="game-link-button"
            class="relative z-20 px-8 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold text-xl rounded-full shadow-xl hover:scale-105 hover:shadow-2xl transition-all duration-300 ease-in-out transform active:scale-95 focus:outline-none focus:ring-4 focus:ring-purple-400"
          >
            Play A Game!
          </button>
          <!-- Button to edit game links list -->
          <button
            id="edit-links-button"
            class="px-6 py-3 bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-700 transition-colors duration-200 ease-in-out transform hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-gray-500"
          >
            Add A Game!
          </button>
        </div>
      </div>
    </div>

    <!-- // D474designs | Modifications, and fixes by JOCV-III ///////
// All Rights Reserved /////// -->

    <!-- Slideshow container -->
    <div class="slideshow-container">
      <!-- Full-width images with number and caption text -->
      <div class="mySlides fade">
        <div class="numbertext">1 / 9</div>
        <a
          href="https://www.youtube.com/@DataTheDestroyer"
          target="_blank"
          style="text-decoration: none"
          ><img src="./img/YT.png" style="width: 100%"
        /></a>
        <div class="text">Data The Destroyer!</div>
      </div>
      <div class="mySlides fade">
        <div class="numbertext">2 / 9</div>
        <a
          href="https://that-hill.github.io"
          target="_blank"
          style="text-decoration: none"
          ><img src="./img/That-Hill.gif" style="width: 100%"
        /></a>
        <div class="text">That-Hill Games!</div>
      </div>
      <div class="mySlides fade">
        <div class="numbertext">3 / 9</div>
        <a
          href="https://rollercoin.com/?r=klv4bpd8"
          target="_blank"
          style="text-decoration: none"
          ><img src="./img/RC.gif" style="width: 100%"
        /></a>
        <div class="text">Own Your Own Crypto-Mine!</div>
      </div>
      <div class="mySlides fade">
        <div class="numbertext">4 / 9</div>
        <a
          href="https://thathillfinance.wordpress.com"
          target="_blank"
          style="text-decoration: none"
          ><img src="./img/THF.png" style="width: 100%"
        /></a>
        <div class="text">That Hill Finance</div>
      </div>
      <div class="mySlides fade">
        <div class="numbertext">5 / 9</div>
        <a
          href="https://d474developments.github.io"
          target="_blank"
          style="text-decoration: none"
          ><img src="./img/DDinsignia.png" style="width: 100%; height: 100%"
        /></a>
        <div class="text">D474developments</div>
      </div>
      <div class="mySlides fade">
        <div class="numbertext">6 / 9</div>
        <a
          href="https://d474designs.github.io"
          target="_blank"
          style="text-decoration: none"
          ><img src="./img/D474designs.gif" style="width: 100%"
        /></a>
        <div class="text">D474designs</div>
      </div>
      <div class="mySlides fade">
        <div class="numbertext">7 / 9</div>
        <a
          href="https://d474media.github.io"
          target="_blank"
          style="text-decoration: none"
          ><img src="./img/D474media.png" style="width: 100%"
        /></a>
        <div class="text">D474media</div>
      </div>
      <div class="mySlides fade">
        <div class="numbertext">8 / 9</div>
        <a
          href="https://chainers.io/?r=m6k4scdg"
          target="_blank"
          style="text-decoration: none"
          ><img src="./img/chainoors.png" style="width: 100%"
        /></a>
        <div class="text">FREE NFT's!</div>
      </div>
      <div class="mySlides fade">
        <div class="numbertext">9 / 9</div>
        <a
          href="https://aliterra.space/"
          target="_blank"
          style="text-decoration: none"
          ><img src="./img/aliterra.jpg" style="width: 100%"
        /></a>
        <div class="text">Web3</div>
      </div>
    </div>

    <script>
      // Game data: scenes, descriptions, choices, and background styles (CSS gradients/colors)
      const gameData = {
        start: {
          description:
            "You awaken in the Whispering Woods, a mystical forest bathed in an ethereal glow. Ancient trees with shimmering leaves loom above, and a faint melody drifts through the air. A winding path leads deeper into the woods, and a narrow, overgrown trail branches off to your left.",
          backgroundStyle: "linear-gradient(to bottom right, #2c3e50, #4a6c8a)", // Dark forest feel
          choices: [
            { text: "Follow the winding path", nextScene: "windingPath" },
            { text: "Take the overgrown trail", nextScene: "overgrownTrail" },
            {
              text: "Seek the heart of the Enchanted Forest",
              nextScene: "enchantedForestClearing",
            },
          ],
        },
        windingPath: {
          description:
            "The winding path leads you to a clearing dominated by a colossal, ancient oak. Its branches reach towards the sky like gnarled arms, and at its base, a small, intricately carved wooden door is nestled among its roots. Beyond the oak, you see a shimmering river.",
          backgroundStyle: "linear-gradient(to top left, #34495e, #7f8c8d)", // Ancient clearing, earthy tones
          choices: [
            { text: "Examine the wooden door", nextScene: "woodenDoor" },
            {
              text: "Head towards the shimmering river",
              nextScene: "shimmeringRiver",
            },
            { text: "Go back to the Whispering Woods", nextScene: "start" },
          ],
        },
        overgrownTrail: {
          description:
            "The overgrown trail is dark and narrow, leading you into a dense thicket. The air grows heavy, and strange whispers seem to emanate from the shadows. You spot a faint light flickering in the distance, and a sturdy bridge made of vines spans a small chasm.",
          backgroundStyle: "linear-gradient(to top, #1a1a1a, #333333)", // Dense, dark thicket
          choices: [
            {
              text: "Investigate the flickering light",
              nextScene: "flickeringLight",
            },
            { text: "Cross the vine bridge", nextScene: "vineBridge" },
            {
              text: "Venture deeper into the dark forest",
              nextScene: "darkForest",
            },
            { text: "Return to the Whispering Woods", nextScene: "start" },
          ],
        },
        woodenDoor: {
          description:
            "The wooden door is warm to the touch, adorned with symbols you don't recognize. As you touch it, a soft hum resonates, and the door slowly creaks open, revealing a spiral staircase descending into darkness.",
          backgroundStyle: "linear-gradient(to bottom, #5a3d2b, #2c1a12)", // Woody, mysterious door
          choices: [
            { text: "Descend the staircase", nextScene: "undergroundChamber" },
            {
              text: "Explore the ancient ruins nearby",
              nextScene: "ancientRuins",
            },
            {
              text: "Seek an ancient library within the ruins",
              nextScene: "ancientLibrary",
            },
            {
              text: "Go back to the Ancient Oak Clearing",
              nextScene: "windingPath",
            },
          ],
        },
        shimmeringRiver: {
          description:
            "The river shimmers with an otherworldly light, its waters clear and inviting. On the far bank, you see a small, abandoned boat tied to a weathered dock. The gentle lapping of the water is soothing.",
          backgroundStyle: "linear-gradient(to right, #3498db, #87ceeb)", // Shimmering blue river
          choices: [
            { text: "Attempt to cross the river", nextScene: "crossRiver" },
            { text: "Follow the riverbank", nextScene: "riverbank" },
            {
              text: "Search for a hidden cave along the river",
              nextScene: "deepRiverCave",
            },
            {
              text: "Dive into the shimmering waters to find a sunken temple",
              nextScene: "sunkenTemple",
            },
            {
              text: "Explore the shimmering lake further upstream",
              nextScene: "shimmeringLake",
            },
          ],
        },
        flickeringLight: {
          description:
            "The flickering light leads you to a small, hidden grotto. Inside, a single, luminous crystal pulsates with a soft glow, illuminating ancient carvings on the cave walls. The air is cool and still.",
          backgroundStyle: "linear-gradient(to bottom, #4b0082, #8a2be2)", // Deep purple, glowing crystal
          choices: [
            { text: "Examine the crystal", nextScene: "examineCrystal" },
            { text: "Study the carvings", nextScene: "studyCarvings" },
            {
              text: "Venture deeper into the mystic cave system",
              nextScene: "mysticCave",
            },
            {
              text: "Go back to the Dense Thicket",
              nextScene: "overgrownTrail",
            },
          ],
        },
        vineBridge: {
          description:
            "The vine bridge sways precariously as you cross, spanning a deep, mist-filled chasm. On the other side, a path leads up a rocky incline, and a faint, sweet scent fills the air.",
          backgroundStyle: "linear-gradient(to top, #6d4c41, #3e2723)", // Earthy, chasm feel
          choices: [
            { text: "Ascend the rocky incline", nextScene: "rockyIncline" },
            { text: "Follow the sweet scent", nextScene: "sweetScent" },
            {
              text: "Go back to the Dense Thicket",
              nextScene: "overgrownTrail",
            },
          ],
        },
        undergroundChamber: {
          description:
            "You descend into a vast underground chamber, lit by glowing moss. In the center, a pedestal holds a single, ornate key. The air is still and silent.",
          backgroundStyle: "linear-gradient(to bottom, #222222, #444444)", // Dark, mossy chamber
          choices: [
            { text: "Take the key", nextScene: "endingSuccess" }, // Leads to specific ending
            {
              text: "Explore the crystal caverns beyond",
              nextScene: "crystalCaverns",
            },
            { text: "Go back up the staircase", nextScene: "woodenDoor" },
          ],
        },
        crossRiver: {
          description:
            "You carefully cross the shimmering river, feeling a strange energy invigorate you. On the far side, a path leads into a vibrant meadow filled with exotic flowers.",
          backgroundStyle: "linear-gradient(to right, #2ecc71, #27ae60)", // Vibrant green meadow
          choices: [
            { text: "Explore the meadow", nextScene: "endingPeace" }, // Leads to specific ending
            {
              text: "Go back to the Shimmering River",
              nextScene: "shimmeringRiver",
            },
          ],
        },
        riverbank: {
          description:
            "Following the riverbank, you discover a hidden waterfall cascading into a serene pool. The sound of the water is mesmerizing.",
          backgroundStyle: "linear-gradient(to bottom, #1abc9c, #16a085)", // Serene waterfall pool
          choices: [
            { text: "Swim in the pool", nextScene: "endingPeace" }, // Leads to specific ending
            {
              text: "Discover the whispering falls' secret",
              nextScene: "whisperingFalls",
            },
            {
              text: "Go back to the Shimmering River",
              nextScene: "shimmeringRiver",
            },
          ],
        },
        examineCrystal: {
          description:
            "As you touch the crystal, visions of ancient times flash before your eyes, revealing forgotten knowledge. You feel a surge of understanding.",
          backgroundStyle: "linear-gradient(to top, #9b59b6, #8e44ad)", // Mystical crystal visions
          choices: [
            { text: "Continue your journey", nextScene: "endingKnowledge" }, // Leads to specific ending
            {
              text: "Go back to the Hidden Grotto",
              nextScene: "flickeringLight",
            },
          ],
        },
        studyCarvings: {
          description:
            "The carvings depict a prophecy of a hero who will unite the realms. You realize your journey is part of a greater destiny.",
          backgroundStyle: "linear-gradient(to bottom, #7f8c8d, #34495e)", // Stone carvings, ancient feel
          choices: [
            { text: "Embrace your destiny", nextScene: "endingKnowledge" }, // Leads to specific ending
            {
              text: "Go back to the Hidden Grotto",
              nextScene: "flickeringLight",
            },
          ],
        },
        rockyIncline: {
          description:
            "Ascending the rocky incline, you reach a high vantage point overlooking the entire Whispering Woods. The view is breathtaking, and a sense of accomplishment fills you.",
          backgroundStyle: "linear-gradient(to top, #6c7a89, #4b5a6c)", // Rocky incline, panoramic
          choices: [
            { text: "Enjoy the view", nextScene: "endingPeace" }, // Leads to specific ending
            {
              text: "Climb higher to the mountain peak",
              nextScene: "mountainPeak",
            },
            {
              text: "Look for a celestial observatory on a distant peak",
              nextScene: "celestialObservatory",
            },
            {
              text: "Venture into the perilous mountain pass",
              nextScene: "perilousPass",
            },
          ],
        },
        sweetScent: {
          description:
            "The sweet scent leads you to a garden of luminescent flowers. Their petals glow softly, and their fragrance is intoxicating. You feel a deep sense of peace.",
          backgroundStyle: "linear-gradient(to bottom, #f1c40f, #f39c12)", // Luminescent garden, warm glow
          choices: [
            { text: "Rest among the flowers", nextScene: "endingPeace" }, // Leads to specific ending
            {
              text: "Discover the secret garden's heart",
              nextScene: "secretGarden",
            },
            { text: "Go back to the Vine Bridge", nextScene: "vineBridge" },
          ],
        },
        // --- EXISTING NEW SCENES ---
        darkForest: {
          description:
            "You push deeper into the dark forest. The trees here are twisted and ancient, their branches forming a dense canopy that blocks out most of the light. Strange, glowing fungi dot the forest floor, and the air is thick with an earthy, damp smell. You feel a sense of ancient power here, both comforting and unsettling.",
          backgroundStyle: "linear-gradient(to bottom, #101010, #2a2a2a)",
          choices: [
            {
              text: "Follow the glowing fungi trail",
              nextScene: "flickeringLight",
            },
            {
              text: "Try to find a way out of the dense woods",
              nextScene: "overgrownTrail",
            },
            {
              text: "Rest beneath an ancient, gnarled tree",
              nextScene: "endingPeace",
            }, // Leads to specific ending
          ],
        },
        mountainPeak: {
          description:
            "After a strenuous climb, you reach the summit of the tallest mountain. The wind whips around you, carrying the scent of pine and distant snow. Below, the entire Mystic Realms spread out like a living map, bathed in the golden light of the setting sun. A small, weathered shrine stands at the very edge of the peak.",
          backgroundStyle: "linear-gradient(to top, #7f8c8d, #bdc3c7)",
          choices: [
            { text: "Examine the shrine", nextScene: "forgottenShrine" },
            {
              text: "Descend back down the incline",
              nextScene: "rockyIncline",
            },
            {
              text: "Take a moment to absorb the view",
              nextScene: "endingPeace",
            }, // Leads to specific ending
          ],
        },
        secretGarden: {
          description:
            "You follow the intoxicating scent to a hidden clearing, where flowers of every color imaginable glow with an inner light. Butterflies with iridescent wings flutter among them, and a gentle, melodic hum fills the air. This place feels like a sanctuary, untouched by the outside world.",
          backgroundStyle: "linear-gradient(to bottom, #f39c12, #f1c40f)",
          choices: [
            { text: "Spend more time in the garden", nextScene: "endingPeace" }, // Leads to specific ending
            {
              text: "Gather some luminescent flowers",
              nextScene: "endingPeace",
            }, // Leads to specific ending
            { text: "Return to the vine bridge area", nextScene: "sweetScent" },
          ],
        },
        ancientRuins: {
          description:
            "Hidden behind a veil of ivy, you discover the crumbling remains of an ancient structure. Moss-covered stones hint at forgotten grandeur, and a sense of history permeates the air. Faint inscriptions adorn a large stone tablet in the center of the ruins.",
          backgroundStyle: "linear-gradient(to bottom, #7f8c8d, #95a5a6)",
          choices: [
            { text: "Decipher the inscriptions", nextScene: "studyCarvings" },
            { text: "Search for artifacts", nextScene: "endingKnowledge" }, // Leads to specific ending
            { text: "Go back to the wooden door", nextScene: "woodenDoor" },
          ],
        },
        deepRiverCave: {
          description:
            "Following the river's edge, you find a hidden entrance to a damp, echoing cave. The sound of the river is amplified here, and small, glowing fish dart through the subterranean waters. A narrow path winds deeper into the darkness.",
          backgroundStyle: "linear-gradient(to bottom, #2c3e50, #34495e)",
          choices: [
            {
              text: "Follow the path deeper into the cave",
              nextScene: "undergroundChamber",
            },
            {
              text: "Return to the shimmering river",
              nextScene: "shimmeringRiver",
            },
            { text: "Try to catch a glowing fish", nextScene: "endingPeace" }, // Leads to specific ending
          ],
        },
        // --- ADDITIONAL NEW SCENES ---
        mysticCave: {
          description:
            "The mystic cave glows with an otherworldly bioluminescence. Strange, ancient symbols shimmer on the walls, hinting at forgotten rituals. The air is cool and carries a faint, sweet smell.",
          backgroundStyle: "linear-gradient(to bottom, #1a0a2a, #3a1a5a)",
          choices: [
            {
              text: "Touch the shimmering symbols",
              nextScene: "examineCrystal",
            },
            { text: "Search for hidden passages", nextScene: "crystalCaverns" },
            {
              text: "Return to the flickering light grotto",
              nextScene: "flickeringLight",
            },
          ],
        },
        sunkenTemple: {
          description:
            "You find yourself in a breathtaking underwater temple, its ancient stones covered in vibrant coral and schools of colorful fish. Light filters through the water from above, creating dazzling patterns on the submerged altars. A sense of profound peace fills this sacred place.",
          backgroundStyle: "linear-gradient(to bottom, #0a3a4a, #1a5a6a)",
          choices: [
            {
              text: "Explore the temple's main hall",
              nextScene: "endingKnowledge",
            }, // Leads to specific ending
            {
              text: "Search for hidden treasures",
              nextScene: "endingKnowledge",
            }, // Leads to specific ending
            {
              text: "Return to the shimmering river",
              nextScene: "shimmeringRiver",
            },
          ],
        },
        celestialObservatory: {
          description:
            "Perched atop the highest peak, an ancient observatory stands open to the cosmos. Intricate mechanisms of brass and crystal hum softly, focusing on the swirling nebulae and distant stars. The air here is thin and crisp, filled with the silence of the universe.",
          backgroundStyle: "linear-gradient(to top, #0a0a2a, #2a1a4a)",
          choices: [
            {
              text: "Look through the grand telescope",
              nextScene: "endingKnowledge",
            }, // Leads to specific ending
            { text: "Study the celestial charts", nextScene: "studyCarvings" },
            {
              text: "Descend back to the rocky incline",
              nextScene: "rockyIncline",
            },
          ],
        },
        enchantedForestClearing: {
          description:
            "You step into a clearing where the trees seem to dance and the very air shimmers with magic. Tiny, glowing orbs float gently, and the ground is carpeted with flowers that hum with soft energy. This is truly the heart of the Enchanted Forest.",
          backgroundStyle: "linear-gradient(to bottom right, #3a6a3a, #5a8a5a)",
          choices: [
            {
              text: "Commune with the forest spirits",
              nextScene: "endingPeace",
            }, // Leads to specific ending
            { text: "Follow a path of glowing orbs", nextScene: "sweetScent" },
            { text: "Return to the Whispering Woods", nextScene: "start" },
          ],
        },
        ancientLibrary: {
          description:
            "Deep within the ruins, you discover a hidden library, miraculously preserved. Shelves filled with ancient tomes line the walls, and a faint, scholarly scent of old parchment fills the air. A single, glowing book rests on a central pedestal.",
          backgroundStyle: "linear-gradient(to bottom, #4a3a2a, #6a5a4a)",
          choices: [
            { text: "Read the glowing book", nextScene: "examineCrystal" },
            { text: "Browse the ancient tomes", nextScene: "studyCarvings" },
            { text: "Return to the ancient ruins", nextScene: "ancientRuins" },
          ],
        },
        crystalCaverns: {
          description:
            "The path leads you into vast caverns where every surface glitters with countless crystals. Stalactites and stalagmites of pure, luminous crystal hang from the ceiling and rise from the floor, reflecting light in a dazzling display. A deep, resonant hum vibrates through the air.",
          backgroundStyle: "linear-gradient(to bottom, #0a4a4a, #1a6a6a)",
          choices: [
            {
              text: "Admire the crystal formations",
              nextScene: "endingKnowledge",
            }, // Leads to specific ending
            {
              text: "Search for rare crystal specimens",
              nextScene: "examineCrystal",
            },
            {
              text: "Return to the underground chamber",
              nextScene: "undergroundChamber",
            },
          ],
        },
        whisperingFalls: {
          description:
            "You arrive at a series of hidden waterfalls, where the water cascades down moss-covered rocks into pools that glow with a soft, ethereal light. The sound of the falling water creates a soothing, almost hypnotic whisper that seems to carry ancient secrets.",
          backgroundStyle: "linear-gradient(to bottom, #1a4a5a, #3a6a7a)",
          choices: [
            {
              text: "Listen closely to the whispers",
              nextScene: "endingPeace",
            }, // Leads to specific ending
            { text: "Meditate by the glowing pools", nextScene: "endingPeace" }, // Leads to specific ending
            { text: "Return to the riverbank", nextScene: "riverbank" },
          ],
        },
        starfallDesert: {
          description:
            "You find yourself in a vast, arid desert under a sky ablaze with falling stars. The sand glows faintly with captured starlight, and ancient, weathered rock formations rise like silent sentinels. A sense of immense solitude and cosmic wonder fills the air.",
          backgroundStyle: "linear-gradient(to bottom, #4a2a0a, #6a3a1a)",
          choices: [
            {
              text: "Search for fallen star fragments",
              nextScene: "endingKnowledge",
            }, // Leads to specific ending
            {
              text: "Navigate by the constellations",
              nextScene: "celestialObservatory",
            },
            { text: "Look for an oasis", nextScene: "endingPeace" }, // Leads to specific ending
          ],
        },
        floatingIslands: {
          description:
            "You discover a series of magnificent islands floating effortlessly in the sky, connected by shimmering bridges of pure light. Lush greenery and exotic flora cover their surfaces, and the clouds drift lazily below your feet. The air is fresh and filled with a sense of boundless freedom.",
          backgroundStyle: "linear-gradient(to top, #87ceeb, #add8e6)",
          choices: [
            { text: "Cross a shimmering bridge", nextScene: "endingSuccess" }, // Leads to specific ending
            { text: "Explore a new island", nextScene: "endingSuccess" }, // Leads to specific ending
            { text: "Look for a way back down", nextScene: "rockyIncline" },
          ],
        },
        shimmeringLake: {
          description:
            "The shimmering river widens into a vast, tranquil lake, its surface reflecting the sky like a perfect mirror. Strange, glowing lilies float on the water, and a small, mist-shrouded island can be seen in the distance.",
          backgroundStyle: "linear-gradient(to bottom, #4682b4, #6a5acd)", // Steel blue to lavender
          choices: [
            {
              text: "Swim towards the mist-shrouded island",
              nextScene: "forgottenShrine",
            },
            {
              text: "Follow the lake shore to a bustling market",
              nextScene: "magicalMarket",
            },
            {
              text: "Return to the shimmering river",
              nextScene: "shimmeringRiver",
            },
          ],
        },
        forgottenShrine: {
          description:
            "On the mist-shrouded island, you find a small, ancient shrine, overgrown with moss and glowing vines. A faint, melodic hum emanates from within, and a weathered stone altar stands at its center.",
          backgroundStyle: "linear-gradient(to bottom right, #5a5a5a, #8a8a8a)", // Stone, ancient feel
          choices: [
            { text: "Examine the altar", nextScene: "endingKnowledge" }, // Leads to specific ending
            { text: "Meditate within the shrine", nextScene: "endingPeace" }, // Leads to specific ending
            {
              text: "Return to the shimmering lake",
              nextScene: "shimmeringLake",
            },
          ],
        },
        magicalMarket: {
          description:
            "Following the lake shore, you arrive at a vibrant, bustling magical market. Stalls overflow with enchanted trinkets, glowing potions, and exotic goods. Strange creatures and diverse people haggle and chat, filling the air with a cacophony of sounds and scents.",
          backgroundStyle: "linear-gradient(to top, #8a2be2, #4b0082)", // Vibrant, mystical market colors
          choices: [
            {
              text: "Browse the enchanted trinkets",
              nextScene: "endingSuccess",
            }, // Leads to specific ending
            {
              text: "Seek out a wise merchant for guidance",
              nextScene: "endingKnowledge",
            }, // Leads to specific ending
            {
              text: "Return to the shimmering lake",
              nextScene: "shimmeringLake",
            },
          ],
        },
        perilousPass: {
          description:
            "The mountain pass narrows into a treacherous trail, winding along the edge of a dizzying abyss. Strong winds howl, and loose rocks tumble from above. This path is clearly not for the faint of heart, but you can see a faint light in the distance.",
          backgroundStyle: "linear-gradient(to bottom, #36454F, #2F4F4F)", // Dark, dangerous mountain
          choices: [
            {
              text: "Brave the perilous pass towards the light",
              nextScene: "celestialObservatory",
            },
            {
              text: "Look for a safer route back down",
              nextScene: "rockyIncline",
            },
            {
              text: "Seek shelter from the wind",
              nextScene: "endingChallenge",
            }, // Leads to specific ending
          ],
        },
        ancientTreehouseVillage: {
          description:
            "Hidden high in the canopy of the oldest trees, you discover an ancient treehouse village. Wooden bridges connect intricately built homes, and the air is filled with the gentle rustling of leaves and soft, melodic chimes. Friendly faces peek from windows, inviting you in.",
          backgroundStyle: "linear-gradient(to bottom, #4CAF50, #8BC34A)", // Lush green, natural
          choices: [
            { text: "Visit the village elder", nextScene: "endingPeace" }, // Leads to specific ending
            { text: "Explore the treehouse homes", nextScene: "endingSuccess" }, // Leads to specific ending
            {
              text: "Descend back to the forest floor",
              nextScene: "enchantedForestClearing",
            },
          ],
        },
        sunkenGrotto: {
          description:
            "Beneath the whispering falls, you find a hidden, sunlit grotto. The water here is crystal clear, revealing a floor of smooth, colorful pebbles. A sense of tranquility washes over you as you take in the beauty of this secluded spot.",
          backgroundStyle: "linear-gradient(to bottom, #5F9EA0, #4682B4)", // Cadet blue to steel blue
          choices: [
            { text: "Rest by the clear waters", nextScene: "endingPeace" }, // Leads to specific ending
            { text: "Search for unique pebbles", nextScene: "endingSuccess" }, // Leads to specific ending
            {
              text: "Return to the whispering falls",
              nextScene: "whisperingFalls",
            },
          ],
        },
        echoingChasm: {
          description:
            "The vine bridge leads you to an immense, echoing chasm. The sheer drop into the darkness is dizzying, and the wind carries strange, distant sounds from below. A narrow ledge seems to lead around the chasm's edge.",
          backgroundStyle: "linear-gradient(to bottom, #1C2833, #2C3E50)", // Dark, deep chasm
          choices: [
            {
              text: "Attempt to traverse the narrow ledge",
              nextScene: "endingChallenge",
            }, // Leads to specific ending
            {
              text: "Look for another way around the chasm",
              nextScene: "vineBridge",
            },
            { text: "Call out into the chasm", nextScene: "endingChallenge" }, // Leads to specific ending
          ],
        },
        glowingForestPath: {
          description:
            "The path through the dark forest is illuminated by an increasing number of glowing fungi and bioluminescent plants. The air feels alive with a soft, magical energy, guiding your way deeper into the heart of the woods.",
          backgroundStyle: "linear-gradient(to bottom, #333333, #556B2F)", // Dark forest with glowing elements
          choices: [
            {
              text: "Follow the most brightly glowing path",
              nextScene: "secretGarden",
            },
            {
              text: "Investigate a particularly large glowing mushroom",
              nextScene: "endingKnowledge",
            }, // Leads to specific ending
            {
              text: "Return towards the dense thicket",
              nextScene: "darkForest",
            },
          ],
        },
        ancientObservatory: {
          description:
            "You arrive at the ancient observatory, a structure of weathered stone and gleaming brass. The air is filled with the quiet hum of ancient machinery, and through a large opening, you can see the night sky, impossibly clear and filled with countless stars.",
          backgroundStyle: "linear-gradient(to top, #0A0A2A, #2A1A4A)", // Deep space, observatory feel
          choices: [
            {
              text: "Look through the grand telescope",
              nextScene: "endingKnowledge",
            }, // Leads to specific ending
            {
              text: "Study the constellations",
              nextScene: "celestialObservatory",
            },
            { text: "Return to the rocky incline", nextScene: "rockyIncline" },
          ],
        },
        // --- NEW ENDING SCENES ---
        endingSuccess: {
          description:
            "Congratulations, brave adventurer! You have successfully navigated the Mystic Realms, faced its challenges, and uncovered its many wonders. Your journey has been a testament to your courage, wisdom, and perseverance. The echoes of your footsteps will forever resonate through these enchanted lands. May your future adventures be just as fulfilling, and may you always carry the spirit of discovery within you. The realms await your next grand tale! Farewell, and may your path always be illuminated by the magic you've found.\n\n✨🌟🏆",
          backgroundStyle: "linear-gradient(to bottom right, #000000, #333333)",
          choices: [
            { text: "Start a new adventure", nextScene: "start" },
            { text: "Reflect on your journey", nextScene: "endingSuccess" },
          ],
        },
        endingKnowledge: {
          description:
            "Your quest for understanding has led you to the deepest truths of the Mystic Realms. You've unraveled ancient mysteries, deciphered forgotten lore, and gained insights that few mortals ever achieve. The knowledge you've acquired is a treasure more valuable than gold, empowering you for whatever lies ahead. The universe whispers its secrets to you, and you are now a true scholar of the arcane.\n\n📚🔮🧠",
          backgroundStyle: "linear-gradient(to bottom right, #1a0a2a, #3a1a5a)",
          choices: [
            {
              text: "Start a new adventure with newfound wisdom",
              nextScene: "start",
            },
            {
              text: "Delve deeper into your studies",
              nextScene: "endingKnowledge",
            },
          ],
        },
        endingPeace: {
          description:
            "You have found profound tranquility amidst the wonders of the Mystic Realms. Your journey has been one of harmony with nature, discovering serene havens and experiencing the gentle magic of the land. A deep sense of calm now resides within you, a testament to the peace you've cultivated. The whispers of the wind and the gentle flow of water will forever guide your spirit.\n\n🍃💧🧘",
          backgroundStyle: "linear-gradient(to bottom right, #27ae60, #1abc9c)",
          choices: [
            { text: "Start a new, peaceful adventure", nextScene: "start" },
            { text: "Bask in the serenity", nextScene: "endingPeace" },
          ],
        },
        endingChallenge: {
          description:
            "You have faced the most daunting trials of the Mystic Realms and emerged victorious! Your courage and resilience have been tested, and you have proven yourself to be a true champion. Every perilous step and every obstacle overcome has forged you into a formidable adventurer. The scars of your journey are badges of honor, and your legend will be whispered among the brave for generations to come.\n\n⚔️🛡️🔥",
          backgroundStyle: "linear-gradient(to bottom right, #6d4c41, #3e2723)",
          choices: [
            { text: "Embark on another challenging quest", nextScene: "start" },
            { text: "Relive your heroic deeds", nextScene: "endingChallenge" },
          ],
        },
      };

      // Default predefined list of game links
      const defaultPredefinedGameLinks = [
        { name: "Remember", url: "./games/61_memory-game/index.html" },
        {
          name: "Look!",
          url: "./games/56_arrows-defense-game-challenge/index.html",
        },
        { name: "Boss Block", url: "./games/50_block-menja/index.html" },
        {
          name: "Different Faces",
          url: "./games/43_emoji-match-game/index.html",
        },
        {
          name: "Wake Up Neo",
          url: "./games/35_hacksys-the-hacking-game/index.html",
        },
        { name: "Crystallize", url: "./games/60_crystal-caves/index.html" },
        {
          name: "You 'member!",
          url: "./games/55_sweet-memory-gamehtml5-js-and-scss/index.html",
        },
        {
          name: "Chain Reaction",
          url: "./games/34_particle-exploder-mini-game/index.html",
        },
        {
          name: "Scrollies",
          url: "./games/42_how-fast-can-you-scroll/index.html ./games/49_game-the-dungeon/index.html",
        },
        {
          name: "'Rona",
          url: "./games/26_coronavirus-invaderscss-pure-game-no-js/index.html",
        },
        {
          name: "To The Moon!",
          url: "./games/59_space-shooter-game/index.html",
        },
        { name: "Meow; Meow", url: "./games/54_game-copycat/index.html" },
        { name: "The Quickness", url: "./games/48_coloron-game/index.html" },
        {
          name: "Diminishing Returns",
          url: "./games/41_pure-css-game-stacker/index.html",
        },
        {
          name: "...In Space!",
          url: "./games/33_tetris-w-high-score-tracking/index.html",
        },
        { name: "That One Game", url: "./games/25_game/index.html" },
        {
          name: "Gallow Gargoyle",
          url: "./games/24_javascript-hangman-game-version-2-0/index.html",
        },
        {
          name: "Ultra High Definition",
          url: "./games/58_superhot-2d-game/index.html",
        },
        { name: "Catniss", url: "./games/53_bullseye-game/index.html" },
        {
          name: "Lifer",
          url: "./games/47_the-frantic-run-of-the-valorous-rabbit/index.html",
        },
        { name: "That One Other Game...", url: "./games/40_2048/index.html" },
        {
          name: "Back To The Lab Again",
          url: "./games/32_game-of-life-react-redux/index.html",
        },
        {
          name: "Fair Dog",
          url: "./games/24_pure-css-sass-carnival-game/index.html",
        },
        { name: "Not A Demo", url: "./games/17_slingshot-game/index.html" },
        {
          name: "Not That Easy",
          url: "./games/11_towers-of-hanoihtml5-js-and-scss-game/index.html",
        },
        { name: "I Forgot", url: "./games/57_react-memory-game/index.html" },
        { name: "Origamis", url: "./games/52_tangram-memory-game/index.html" },
        {
          name: "Not Worms",
          url: "./games/46_gorillasplain-javascript-game-with-html-canvas/index.html",
        },
        { name: "Stack 'Em High", url: "./games/23_tower-blocks/index.html" },
        {
          name: "The Pursuit Of Happiness",
          url: "./games/31_the-cube/index.html",
        },
        { name: "Ender's Game", url: "./games/23_cheap-ai-chess/index.html" },
        {
          name: "Triple S",
          url: "./games/16_colorful-madness-how-good-monitor-eyes-do-you-have/index.html",
        },
        {
          name: "A Dictionary",
          url: "./games/10_word-guessing-game/index.html",
        },
        { name: "Numbers Game", url: "./games/5_sudoku-js/index.html" },
        {
          name: "Minotaur",
          url: "./games/51_maze-gridpure-css-gameno-js/index.html",
        },
        {
          name: "Low Resolution Frog",
          url: "./games/45_traffic-run-game-with-three-js/index.html",
        },
        {
          name: "Jump Around",
          url: "./games/38_css-html-platform-game/index.html",
        },
        {
          name: "Or Lose Your Marbles",
          url: "./games/30_game-marble-labyrinth/index.html",
        },
        { name: "Smol", url: "./games/22_just-a-little-game/index.html" },
        { name: "Chugga Choo", url: "./games/15_train-puzzle/index.html" },
        { name: "Colors", url: "./games/9_color-collision/index.html" },
        {
          name: "Once Again...!",
          url: "./games/4_js-planet-defense-game/index.html",
        },
        {
          name: "Keep Six",
          url: "./games/44_zombie-mayhemhtml5-js-and-scss-game/index.html",
        },
        { name: "You Can Do It...!", url: "./games/37_get-to-zero/index.html" },
        { name: "Sploot", url: "./games/29_cub-n-puppuzzle-game-demo" },
        {
          name: "Beep, Beep, Beep!",
          url: "./games/21_pure-css-minesweeper/index.html",
        },
        {
          name: "Criss-Cross",
          url: "./games/14_crossy-road-with-three-js/index.html",
        },
        { name: "...Nearby", url: "./games/8_path-finder-game/index.html" },
        { name: "Snake!", url: "./games/3_snake-gamecss-renderer/index.html" },
        {
          name: "Zoom, Zoom!",
          url: "./games/36_old-school-racing-game/index.html",
        },
        { name: "A Thesaurus", url: "./games/28_wordlepractice/index.html" },
        { name: "Preparation", url: "./games/26_fishing-game/index.html" },
        {
          name: "Roll 'Em!",
          url: "./games/13_css-snake-ladders-a-multiplayer-game-developed-in-html-css-with-no-js/index.html",
        },
        { name: "Ecstacy", url: "./games/7_color-blast/index.html" },
        { name: "Tilt-A-Whirl", url: "./games/2_tilting-maze-game/index.html" },
        { name: "Again", url: "./games/27_2048-game/index.html" },
        { name: "XOXO", url: "./games/12_pure-css-tic-tac-toe/index.html" },
        {
          name: "Rochambeau",
          url: "./games/6_css-rock-paper-scissors/index.html",
        },
        {
          name: "Not Christmas Cannon",
          url: "./games/1_christmas-cannon/index.html",
        },
      ];

      let predefinedGameLinks = []; // This will hold the active list of game links

      // Get DOM elements
      const backgroundLayersContainer = document.getElementById(
        "background-layers-container",
      );
      const sceneDescription = document.getElementById("scene-description");
      const choicesContainer = document.getElementById("choices-container");
      const gameLinkButton = document.getElementById("game-link-button");
      const editLinksButton = document.getElementById("edit-links-button");

      let currentSceneId = "start"; // Initial scene

      // Function to render a scene
      function renderScene(sceneId) {
        const scene = gameData[sceneId];
        if (!scene) {
          console.error("Scene not found:", sceneId);
          return;
        }

        // Fade out the old background
        backgroundLayersContainer.style.opacity = "0";

        setTimeout(() => {
          // Apply the new background style (CSS gradient/color)
          backgroundLayersContainer.style.backgroundImage =
            scene.backgroundStyle;
          backgroundLayersContainer.style.backgroundColor = ""; // Clear any solid color if gradient is used

          // Fade in the new background
          backgroundLayersContainer.style.opacity = "1";
        }, 500); // Wait for the fade-out to complete before applying new style and fading in

        // Update scene description
        sceneDescription.innerHTML = scene.description.replace(/\n/g, "<br>"); // Use innerHTML to render line breaks and emojis

        // Clear previous choices
        choicesContainer.innerHTML = "";

        // Create new choice buttons
        scene.choices.forEach((choice) => {
          const button = document.createElement("button");
          button.textContent = choice.text;
          button.classList.add("choice-button"); // Apply Tailwind classes for styling
          button.onclick = () => {
            currentSceneId = choice.nextScene;
            renderScene(currentSceneId);
          };
          choicesContainer.appendChild(button);
        });
      }

      // Function to set the game link on the button
      function setGameLink(link, name) {
        // Basic URL validation
        if (link.startsWith("http://") || link.startsWith("https://")) {
          gameLinkButton.textContent = `Play ${name}!`; // Update button text
          gameLinkButton.onclick = () => window.open(link, "_blank"); // Open in new tab
          // Optionally, add a visual cue that the link is set
          gameLinkButton.classList.add(
            "bg-green-600",
            "from-green-600",
            "to-emerald-600",
          );
          gameLinkButton.classList.remove(
            "bg-purple-600",
            "from-purple-600",
            "to-indigo-600",
          );
        } else {
          displayMessage(
            "Invalid game link provided. Please ensure it starts with http:// or https://",
            "error",
          );
        }
      }

      // Function to display the game link selection modal
      function showGameLinkSelectionModal() {
        // If no links are available, prompt user to add them
        if (predefinedGameLinks.length === 0) {
          displayMessage(
            "No game links available. Please use 'Edit Game Links' to add some.",
            "info",
          );
          return;
        }

        const modal = document.createElement("div");
        modal.classList.add(
          "fixed",
          "inset-0",
          "bg-black",
          "bg-opacity-80",
          "flex",
          "items-center",
          "justify-center",
          "z-50",
          "p-4",
        );

        const modalContent = document.createElement("div");
        modalContent.classList.add(
          "bg-gray-800",
          "rounded-xl",
          "p-8",
          "shadow-2xl",
          "text-white",
          "max-w-md",
          "w-3/5",
          "absolute",
          "inset-x-0",
        );
        modalContent.innerHTML = `
                <h2 class="text-2xl font-bold mb-6 text-center">↑<br />Choose Your Game</h2>
                <div id="game-links-list" class="flex flex-col gap-4 mb-6 max-h-60 overflow-y-auto">
                    <!-- Game links will be inserted here -->
                </div>
                <button id="close-modal-button" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
          <h2 class="text-2xl font-bold mb-6 text-center"><br />↓</h2>
            `;

        const gameLinksList = modalContent.querySelector("#game-links-list");

        // Populate the modal with predefined game links
        predefinedGameLinks.forEach((game) => {
          const gameButton = document.createElement("button");
          gameButton.textContent = game.name;
          // Reusing choice-button styles for consistency
          gameButton.classList.add(
            "choice-button",
            "w-full",
            "bg-green-700",
            "hover:bg-green-800",
          );
          gameButton.onclick = () => {
            setGameLink(game.url, game.name);
            modal.remove(); // Close modal after selection
          };
          gameLinksList.appendChild(gameButton);
        });

        const closeModalButton = modalContent.querySelector(
          "#close-modal-button",
        );
        closeModalButton.onclick = () => modal.remove(); // Close modal

        modal.appendChild(modalContent);
        document.body.appendChild(modal);
      }

      // Function to display the modal for editing game links
      function showEditGameLinksModal() {
        const modal = document.createElement("div");
        modal.classList.add(
          "fixed",
          "inset-0",
          "bg-black",
          "bg-opacity-80",
          "flex",
          "items-center",
          "justify-center",
          "z-50",
          "p-4",
        );

        const modalContent = document.createElement("div");
        modalContent.classList.add(
          "bg-gray-800",
          "rounded-xl",
          "p-8",
          "shadow-2xl",
          "text-white",
          "max-w-xl",
          "w-3/5",
          "absolute",
          "z-50",
          "inset-x-0",
        );
        modalContent.innerHTML = `
                <h2 class="text-2x1 font-bold mb-6 text-center">Edit Game Links (JSON Array)</h2>
                <textarea id="game-links-textarea" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-md text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4"
                          placeholder='[{"name": "My Game 1", "url": "https://example.com/game1"}, {"name": "My Game 2", "url": "https://example.com/game2"}]'></textarea>
                <div class="flex justify-end gap-4">
                    <button id="save-links-button" class="px-6 py-3 bg-blue-700 text-white font-semibold rounded-lg hover:bg-blue-800 transition-colors">Save Links</button>
                    <button id="cancel-links-button" class="px-6 py-3 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 transition-colors">Cancel</button>
                </div>
                <button id="close-edit-modal-button" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
            `;

        const gameLinksTextarea = modalContent.querySelector(
          "#game-links-textarea",
        );
        const saveLinksButton =
          modalContent.querySelector("#save-links-button");
        const cancelLinksButton = modalContent.querySelector(
          "#cancel-links-button",
        );
        const closeEditModalButton = modalContent.querySelector(
          "#close-edit-modal-button",
        );

        // Populate textarea with current links (if any)
        gameLinksTextarea.value = JSON.stringify(predefinedGameLinks, null, 2);

        saveLinksButton.onclick = () => {
          try {
            const newLinks = JSON.parse(gameLinksTextarea.value);
            // Basic validation for the structure
            if (
              Array.isArray(newLinks) &&
              newLinks.every(
                (item) =>
                  typeof item === "object" &&
                  item !== null &&
                  "name" in item &&
                  "url" in item,
              )
            ) {
              predefinedGameLinks = newLinks;
              localStorage.setItem(
                "customGameLinks",
                JSON.stringify(predefinedGameLinks),
              ); // Save to local storage
              displayMessage("Game links updated successfully!", "info");
              modal.remove(); // Close modal
            } else {
              displayMessage(
                "Invalid JSON format. Please ensure it's an array of objects with 'name' and 'url' properties.",
                "error",
              );
            }
          } catch (e) {
            displayMessage(
              "Error parsing JSON. Please check your syntax.",
              "error",
            );
            console.error("JSON parsing error:", e);
          }
        };

        cancelLinksButton.onclick = () => modal.remove(); // Close modal without saving
        closeEditModalButton.onclick = () => modal.remove(); // Close modal

        modal.appendChild(modalContent);
        document.body.appendChild(modal);
      }

      // Function to display a custom message box (replaces alert)
      function displayMessage(message, type = "info") {
        const messageBox = document.createElement("div");
        messageBox.classList.add(
          "fixed",
          "top-1/2",
          "left-1/2",
          "-translate-x-1/2",
          "-translate-y-1/2",
          "p-6",
          "rounded-lg",
          "shadow-xl",
          "text-white",
          "z-50",
          "text-center",
          "transition-all",
          "duration-300",
          "transform",
          "scale-0",
        );

        if (type === "error") {
          messageBox.classList.add("bg-red-700");
        } else {
          messageBox.classList.add("bg-blue-700");
        }

        messageBox.innerHTML = `<p class="text-lg mb-4">${message}</p><button class="px-4 py-2 bg-white text-gray-800 rounded-md hover:bg-gray-200">OK</button>`;
        document.body.appendChild(messageBox);

        // Animate in
        setTimeout(() => {
          messageBox.classList.remove("scale-0");
          messageBox.classList.add("scale-100");
        }, 50); // Small delay for CSS transition to kick in

        messageBox.querySelector("button").onclick = () => {
          // Animate out and remove
          messageBox.classList.remove("scale-100");
          messageBox.classList.add("scale-0");
          setTimeout(() => {
            messageBox.remove();
          }, 300);
        };
      }

      // Initialize game links from localStorage or use defaults
      function initializeGameLinks() {
        const storedLinks = localStorage.getItem("customGameLinks");
        if (storedLinks) {
          try {
            predefinedGameLinks = JSON.parse(storedLinks);
          } catch (e) {
            console.error(
              "Error parsing stored game links, using defaults:",
              e,
            );
            predefinedGameLinks = defaultPredefinedGameLinks;
          }
        } else {
          predefinedGameLinks = defaultPredefinedGameLinks;
        }
      }

      // Set up event listeners
      gameLinkButton.onclick = showGameLinkSelectionModal;
      editLinksButton.onclick = showEditGameLinksModal;

      // Initialize the game when the window loads
      window.onload = function () {
        initializeGameLinks(); // Load custom links first
        renderScene(currentSceneId);
      };
    </script>

    <!-- partial -->
    <script src="./sitemapscript.js"></script>

    <!-- partial -->
    <script src="./nav/script.js"></script>
    <script src="./script3.js"></script>
  </body>
</html>

<!-- // D474designs | Modifications, and fixes by JOCV-III ///////
// All Rights Reserved /////// -->
